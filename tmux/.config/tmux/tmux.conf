#
# Color scheme

# Blue
THEME_STATUS_FG="#000000"
THEME_STATUS_BG="blue"
THEME_STATUS_SELECTED_FG="blue"
THEME_STATUS_SELECTED_BG="black"
THEME_STATUS_ACTIVITY_FG="#000000"
THEME_STATUS_ACTIVITY_BG="lightgrey"
THEME_MENU_BORDER_FG="blue"
THEME_MENU_SELECTED_FG="#000000"
THEME_MENU_SELECTED_BG="yellow"

## Green
#THEME_STATUS_FG="#000000"
#THEME_STATUS_BG="green"
#THEME_STATUS_SELECTED_FG="green"
#THEME_STATUS_SELECTED_BG="black"
#THEME_STATUS_ACTIVITY_FG="#000000"
#THEME_STATUS_ACTIVITY_BG="yellow"
#THEME_MENU_BORDER_FG="green"
#THEME_MENU_SELECTED_FG="#000000"
#THEME_MENU_SELECTED_BG="yellow"

## White
#THEME_STATUS_FG="#000000"
#THEME_STATUS_BG="white"
#THEME_STATUS_SELECTED_FG="white"
#THEME_STATUS_SELECTED_BG="black"
#THEME_STATUS_ACTIVITY_FG="#000000"
#THEME_STATUS_ACTIVITY_BG="darkgrey"
#THEME_MENU_BORDER_FG="white"
#THEME_MENU_SELECTED_FG="#000000"
#THEME_MENU_SELECTED_BG="yellow"

## Dark grey
#THEME_STATUS_FG="#000000"
#THEME_STATUS_BG="darkgrey"
#THEME_STATUS_SELECTED_FG="white"
#THEME_STATUS_SELECTED_BG="black"
#THEME_STATUS_ACTIVITY_FG="#000000"
#THEME_STATUS_ACTIVITY_BG="lightgrey"
#THEME_MENU_BORDER_FG="white"
#THEME_MENU_SELECTED_FG="#000000"
#THEME_MENU_SELECTED_BG="yellow"

## Black
#THEME_STATUS_FG="grey"
#THEME_STATUS_BG="black"
#THEME_STATUS_SELECTED_FG="black"
#THEME_STATUS_SELECTED_BG="lightgrey"
#THEME_STATUS_ACTIVITY_FG="#ffffff"
#THEME_STATUS_ACTIVITY_BG="black"
#THEME_MENU_BORDER_FG="white"
#THEME_MENU_SELECTED_FG="#000000"
#THEME_MENU_SELECTED_BG="yellow"

# Used by scripts
set-option -g @THEME_MENU_BORDER_FG "${THEME_MENU_BORDER_FG}"
set-option -g @THEME_MENU_SELECTED_FG "${THEME_MENU_SELECTED_FG}"
set-option -g @THEME_MENU_SELECTED_BG "${THEME_MENU_SELECTED_BG}"

#
# Icons

ICON_SWITCH_SESSION=""
ICON_CURRENT_SESSION="󰇄 "
ICON_ACTIVE_PANE="" # 󰜱  󰜴 
ICON_ACTIVE_WINDOW="" # 󰜱  󰜴 
ICON_MARKED="󰃁" # 󰃁 󰍕
ICON_DELIMITER="" #  󰇝 • 
ICON_PREFIX="󰘴" #   󰘴 󰏣
ICON_SESSION="󰇄"
ICON_ZOOM=""
ICON_NAME="" #   
ICON_COMMAND="󰆍"
ICON_ACTIVITY="󱅫" # 󱅫 󰂞 󰵙

# Used by scripts
set-option -g @ICON_SWITCH_SESSION "${ICON_SWITCH_SESSION}"
set-option -g @ICON_CURRENT_SESSION "${ICON_CURRENT_SESSION}"

#
# Formats

CHOOSE_TREE_FORMAT=\
"#{?pane_format,\
#{?pane_active,${ICON_ACTIVE_PANE}, }#{pane_current_command}#{?pane_marked, ${ICON_MARKED},}\
,\
#{?window_format,\
#{?window_marked_flag,#[reverse],}\
#{?window_active,${ICON_ACTIVE_WINDOW}, }#{window_name} \
#{?window_activity_flag,${ICON_ACTIVITY},}\
,\
#{?session_grouped, \
(group #{session_group}: \
#{session_group_list}),\
}\
#{?session_attached,${ICON_CURRENT_SESSION},}\
}\
}"

#
# General

set-option -g default-terminal "screen-256color"
set-option -ga terminal-overrides ",xterm-256color:Tc"
set-option -sg escape-time 0
set-option -g history-limit 10000
set-option -g base-index 1
set-option -g set-titles on
set-option -g detach-on-destroy off
set-hook -g "session-closed" "choose-tree"

#
# Statusline

set-option -g status-interval 1
set-option -g status-left-length 21
set-option -g status-right-length 50
set-option -g status-left " ${ICON_SESSION} #S ${ICON_DELIMITER} "
set-option -g status-bg ${THEME_STATUS_BG}
set-option -g status-fg ${THEME_STATUS_FG}

set-option -g status-right "\
#{?client_prefix,#[fg=${THEME_STATUS_SELECTED_FG}]#[bg=${THEME_STATUS_SELECTED_BG}] ${ICON_PREFIX} #[fg=${THEME_STATUS_FG}]#[bg=${THEME_STATUS_BG}],}\
#{?window_zoomed_flag, ${ICON_DELIMITER} ${ICON_ZOOM},}\
 ${ICON_DELIMITER} #(~/.config/tmux/battery-status)\
 ${ICON_DELIMITER} %a %b %d ${ICON_DELIMITER} %H:%M "

#
# Statusline: windows

set-option -g renumber-windows on
set-option -w -g automatic-rename on
set-option -w -g monitor-activity off
set-option -g activity-action none
#set-option -g monitor-bell on
#set-option -g visual-activity on

set-option -w -g window-status-current-format "\
#[fg=${THEME_STATUS_SELECTED_FG},bg=${THEME_STATUS_SELECTED_BG},bold]\
 #(~/.config/tmux/auto-window-name #{pane_current_command} #{pane_current_path} #{window_name}) \
#[fg=default,bg=defult]"

set-option -w -g window-status-format "\
 #(~/.config/tmux/auto-window-name #{pane_current_command} #{pane_current_path} #{window_name}) "

set-option -w -g window-status-activity-style fg=${THEME_STATUS_ACTIVITY_FG},bg=${THEME_STATUS_ACTIVITY_BG}
set-option -w -g window-status-bell-style fg=${THEME_STATUS_ACTIVITY_FG},bg=${THEME_STATUS_ACTIVITY_BG}

#
# Panes

set-option -g pane-border-lines "double"
set-option -g pane-active-border-style fg=${THEME_STATUS_BG},bg=default
set-option -w -g pane-base-index 1

#
# Key bindings

bind-key r source-file "~/.config/tmux/tmux.conf"

bind-key -T root F12 command-prompt -p " ${ICON_NAME} New session name:" "new-session -n '' -s '%%'"
bind-key -T root S-F12 new-session -n ""
bind-key s new-session -n ""
bind-key S command-prompt -p " ${ICON_NAME} New session name:" "new-session -n '' -s '%%'"

unbind-key c
bind-key n new-window -n ""
bind-key N command-prompt -p " ${ICON_COMMAND} Run in a new window:" "new-window -n \"\" %%"
bind-key -T root F11 new-window -n ""
bind-key -T root S-F11 command-prompt -p " ${ICON_COMMAND} Run in a new window:" "new-window -n \"\" %%"

bind-key \\ split-window -h -c "#{pane_current_path}"
bind-key | command-prompt -p " ${ICON_COMMAND} Split and run:" "split-window -h -c '#{pane_current_path}' %%"
bind-key - split-window -v -c "#{pane_current_path}"
bind-key _ command-prompt -p " ${ICON_COMMAND} Split and run:" "split-window -v -c '#{pane_current_path}' %%"
bind-key -T root F10 split-window -h -c "#{pane_current_path}"
bind-key -T root S-F10 split-window -v -c "#{pane_current_path}"

bind-key Tab run-shell "~/.config/tmux/switch-session"
bind-key -T root F9 run-shell "~/.config/tmux/switch-session"
bind-key -T root S-F9 choose-tree -Z -F "${CHOOSE_TREE_FORMAT}"

bind-key a set-option -w -g monitor-activity off \; display-message "Monitor activity off"
bind-key A set-option -w -g monitor-activity on \; display-message "Monitor activity on"

bind-key -r H resize-pane -L
bind-key -r J resize-pane -D
bind-key -r K resize-pane -U
bind-key -r L resize-pane -R
bind-key -T root F8 resize-pane -Z
bind-key -T root S-F8 copy-mode

bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

bind-key x kill-pane
bind-key X kill-window

bind-key Enter command-prompt
unbind-key ":"

bind-key "'" command-prompt -p " ${ICON_NAME} Rename window:" -I "#W" "rename-window '%%'"
unbind-key ","

bind-key '"' command-prompt -p " ${ICON_NAME} Rename session:" -I "#S" "rename-session '%%'"
unbind-key "$"

bind-key -T root S-F1 select-window -t 1
bind-key -T root S-F2 select-window -t 2
bind-key -T root S-F3 select-window -t 3
bind-key -T root S-F4 select-window -t 4
bind-key -T root S-F5 select-window -t 5
bind-key -T root S-F6 select-window -t 6
bind-key -T root S-F7 select-window -t 7

bind-key ")" select-window -t 0
bind-key "!" select-window -t 1
bind-key "@" select-window -t 2
bind-key "#" select-window -t 3
bind-key "$" select-window -t 4
bind-key "%" select-window -t 5
bind-key "^" select-window -t 6
bind-key "&" select-window -t 7
bind-key "*" select-window -t 8
bind-key "(" select-window -t 9

bind-key 0 select-pane -t 0
bind-key 1 select-pane -t 1
bind-key 2 select-pane -t 2
bind-key 3 select-pane -t 3
bind-key 4 select-pane -t 4
bind-key 5 select-pane -t 5
bind-key 6 select-pane -t 6
bind-key 7 select-pane -t 7
bind-key 8 select-pane -t 8
bind-key 9 select-pane -t 9

bind-key -T root F1 select-pane -t 1
bind-key -T root F2 select-pane -t 2
bind-key -T root F3 select-pane -t 3
bind-key -T root F4 select-pane -t 4
bind-key -T root F5 select-pane -t 5
bind-key -T root F6 select-pane -t 6
bind-key -T root F7 select-pane -t 7

bind-key [ copy-mode
bind-key p paste-buffer
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi r send -X rectangle-toggle
bind-key -T copy-mode-vi y send -X copy-selection
bind-key -T copy-mode-vi y send -X copy-pipe "xclip -sel clip -i"

set-option -w -g mode-keys vi

